<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat - Chat App</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="chat-container">
        <!-- Sidebar Kontak (Sama seperti di contacts.html tapi lebih kecil) -->
        <div class="chat-sidebar">
            <div class="sidebar-header">
                <button class="back-to-contacts" id="back-to-contacts">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="user-profile">
                    <div class="avatar" id="sidebar-user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-info">
                        <h3 id="sidebar-user-name">Anda</h3>
                        <p class="user-status">Online</p>
                    </div>
                </div>
            </div>
            
            <div class="search-container">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="sidebar-search" placeholder="Cari chat...">
                </div>
            </div>
            
            <div class="chats-list" id="chats-list">
                <!-- Daftar chat akan dimuat di sini -->
            </div>
            
            <div class="sidebar-footer">
                <button class="new-chat-btn" id="sidebar-new-chat">
                    <i class="fas fa-comment-medical"></i>
                    <span>Chat Baru</span>
                </button>
            </div>
        </div>
        
        <!-- Area Chat Utama -->
        <div class="chat-main">
            <!-- Header Chat -->
            <div class="chat-header" id="chat-header">
                <div class="chat-partner-info">
                    <button class="back-to-contacts-mobile" id="back-to-contacts-mobile">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <div class="partner-avatar" id="partner-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="partner-details">
                        <h3 id="partner-name">Pilih Kontak</h3>
                        <p id="partner-status">Status</p>
                    </div>
                </div>
                
                <div class="chat-actions">
                    <button class="icon-btn" id="voice-call-btn">
                        <i class="fas fa-phone"></i>
                    </button>
                    <button class="icon-btn" id="video-call-btn">
                        <i class="fas fa-video"></i>
                    </button>
                    <button class="icon-btn" id="chat-info-btn">
                        <i class="fas fa-info-circle"></i>
                    </button>
                    <div class="dropdown">
                        <button class="icon-btn" id="more-options-btn">
                            <i class="fas fa-ellipsis-v"></i>
                        </button>
                        <div class="dropdown-menu">
                            <a href="#" class="dropdown-item"><i class="fas fa-user-plus"></i> Tambah ke Kontak</a>
                            <a href="#" class="dropdown-item"><i class="fas fa-ban"></i> Blokir</a>
                            <a href="#" class="dropdown-item"><i class="fas fa-trash"></i> Hapus Chat</a>
                            <a href="#" class="dropdown-item"><i class="fas fa-bell-slash"></i> Bisukan Notifikasi</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Area Pesan -->
            <div class="chat-messages" id="chat-messages">
                <!-- Pesan akan dimuat di sini -->
                <div class="empty-chat">
                    <div class="empty-chat-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <h2>Belum ada percakapan</h2>
                    <p>Pilih kontak dari daftar atau mulai chat baru</p>
                    <button class="btn-primary" id="start-first-chat">Mulai Percakapan Pertama</button>
                </div>
            </div>
            
            <!-- Input Pesan -->
            <div class="chat-input-container">
                <div class="input-actions">
                    <button class="icon-btn" id="attach-file-btn">
                        <i class="fas fa-paperclip"></i>
                    </button>
                    <button class="icon-btn" id="emoji-btn">
                        <i class="far fa-smile"></i>
                    </button>
                    <button class="icon-btn" id="camera-btn">
                        <i class="fas fa-camera"></i>
                    </button>
                </div>
                
                <div class="message-input-wrapper">
                    <div class="message-input" id="message-input" contenteditable="true" placeholder="Ketik pesan..."></div>
                    <div class="input-hints">
                        <span class="hint">Tekan Enter untuk mengirim, Shift+Enter untuk baris baru</span>
                    </div>
                </div>
                
                <div class="send-actions">
                    <button class="icon-btn" id="voice-message-btn">
                        <i class="fas fa-microphone"></i>
                    </button>
                    <button class="send-btn" id="send-message-btn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
            
            <!-- Info tambahan (ketik, merekam suara, dll) -->
            <div class="chat-status" id="chat-status">
                <!-- Status akan ditampilkan di sini -->
            </div>
        </div>
        
        <!-- Panel Info Chat (Opsional, bisa disembunyikan) -->
        <div class="chat-info-panel" id="chat-info-panel">
            <div class="info-panel-header">
                <h3>Info Chat</h3>
                <button class="close-info-panel" id="close-info-panel">&times;</button>
            </div>
            <div class="info-panel-content">
                <div class="partner-info-card">
                    <div class="info-avatar" id="info-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <h3 id="info-name">Nama Kontak</h3>
                    <p id="info-status">Status</p>
                    <p class="user-id-info">ID: <span id="info-user-id">USER12345</span></p>
                </div>
                
                <div class="info-section">
                    <h4><i class="fas fa-image"></i> Media, File & Link</h4>
                    <div class="media-grid" id="media-grid">
                        <!-- Media akan dimuat di sini -->
                    </div>
                </div>
                
                <div class="info-section">
                    <h4><i class="fas fa-bell"></i> Notifikasi</h4>
                    <div class="toggle-item">
                        <span>Bisukan Notifikasi</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="mute-notifications">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
                
                <div class="info-section danger-zone">
                    <h4><i class="fas fa-exclamation-triangle"></i> Zona Berbahaya</h4>
                    <button class="danger-btn" id="block-user-btn">
                        <i class="fas fa-ban"></i> Blokir Pengguna
                    </button>
                    <button class="danger-btn" id="delete-chat-btn">
                        <i class="fas fa-trash"></i> Hapus Percakapan
                    </button>
                    <button class="danger-btn" id="report-user-btn">
                        <i class="fas fa-flag"></i> Laporkan Pengguna
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal untuk pratinjau file -->
    <div class="modal" id="file-preview-modal">
        <div class="modal-content file-preview">
            <!-- Konten pratinjau akan dimuat di sini -->
        </div>
    </div>
    
    <!-- Modal untuk emoji -->
    <div class="modal emoji-modal" id="emoji-modal">
        <div class="modal-content">
            <div class="emoji-categories">
                <button class="emoji-category active" data-category="recent">Terbaru</button>
                <button class="emoji-category" data-category="smileys">Smiley</button>
                <button class="emoji-category" data-category="people">Orang</button>
                <button class="emoji-category" data-category="nature">Alam</button>
                <button class="emoji-category" data-category="food">Makanan</button>
                <button class="emoji-category" data-category="symbols">Simbol</button>
            </div>
            <div class="emoji-container" id="emoji-container">
                <!-- Emoji akan dimuat di sini -->
            </div>
            <div class="emoji-footer">
                <button class="btn-secondary close-emoji">Tutup</button>
            </div>
        </div>
    </div>
    
    <div class="notification" id="notification"></div>
    
    <script src="firebase-config.js"></script>
    <script src="app.js"></script>
</body>
</html>